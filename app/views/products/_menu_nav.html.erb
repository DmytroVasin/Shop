<div class="menu">
  <div class="header">
    Выберете продукт:
  </div>

  <%= render partial: 'products/search_reset' %>

  <div class="section categories_bar">
    <h3>Категории:</h3>

    <ul id='categories_section'>
      <%= render partial: 'products/category', collection: @categories %>
    </ul>
  </div>

  <div class="section gender_bar">
    <h3>Пол:</h3>
    <ul>
      <%= render partial: 'products/gender', locals: { genders: @genders } %>
    </ul>
  </div>

  <div class="section color_bar">
    <h3>Цвет:</h3>
    <ul class="brands_section">
      <%= render partial: 'products/hstore_tags', locals: { params_array: session['products_params'].try(:[], 'color_params') , current_array: Colour::COMMON_COLORS_RUS } %>
    </ul>
  </div>

  <div class="section brand_bar">
    <h3>Бренды:</h3>
    <ul class="brands_section">
      <%= render partial: 'products/brand', collection: @brands %>
    </ul>
  </div>

  <div class="section material_bar">
    <h3>Материал:</h3>
    <ul class="brands_section">
      <%= render partial: 'products/hstore_tags', locals: { params_array: session['products_params'].try(:[], 'material_params'), current_array: Product::MATERIAL } %>
    </ul>
  </div>

  <div class="section feature_bar">
    <h3>Особенности:</h3>
    <ul class="brands_section">
      <%= render partial: 'products/hstore_tags', locals: { params_array: session['products_params'].try(:[], 'feature_params'), current_array: Product::FEATURES } %>
    </ul>
  </div>

  <div class="section zipper_bar">
    <h3>Тип закрытия:</h3>
    <ul class="brands_section">
      <%= render partial: 'products/hstore_tags', locals: { params_array: session['products_params'].try(:[], 'zipper_params'), current_array: Product::CLOSING_TYPE } %>
    </ul>
  </div>

  <div class="section price_bar">
    <h3>Цена (грн):</h3>
    <% price_array = session['products_params'].try(:[], 'price_between').try(:split, ',') %>
    <%= hidden_field_tag 'leftValue',  price_array.try(:[], 0) %>
    <%= hidden_field_tag 'rightValue', price_array.try(:[], 1) %>
    <!-- <div>width: 250, roundUp: 50, leftLimit: 100, leftValue: 500, rightLimit: 5000, rightValue: 1500</div> -->
    <script type="text/javascript">

    trackbar.getObject('one').init({
      onMove : function() {
        $('#leftValue').val(this.leftValue).change();
        $('#rightValue').val(this.rightValue).change();
      },
      width : 140, // px
      leftLimit : 0, // unit of value
      leftValue : 0, // unit of value
      rightLimit : 4000, // unit of value
      rightValue : 4000, // unit of value
      roundUp : 5, // unit of value
    });
    </script>
  </div>
  <%= render partial: 'products/search_reset' %>
</div>

<script>
  function handler(event) {
    event.preventDefault ? event.preventDefault() : (event.returnValue=false);
  }
</script>
